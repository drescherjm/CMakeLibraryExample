set(LOCAL_TARGET_NAME ${PROJECT_NAME}LibA)

set(SOURCE_FILES 
	lib.cxx
)

set(API_HEADERS 
	lib.h
)

add_library( ${LOCAL_TARGET_NAME} ${SOURCE_FILES} ${API_HEADERS})

target_include_directories(${LOCAL_TARGET_NAME} PUBLIC 
	$<INSTALL_INTERFACE:Include>
	$<BUILD_INTERFACE:${CMAKE_CURRENT_BINARY_DIR}>
	$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
)

include(GenerateExportHeader) 

GENERATE_EXPORT_HEADER( ${LOCAL_TARGET_NAME}
             BASE_NAME ${PROJECT_NAME}
             EXPORT_MACRO_NAME ${LOCAL_TARGET_NAME}_EXPORT
             EXPORT_FILE_NAME ${LOCAL_TARGET_NAME}_Export.h
             STATIC_DEFINE ${LOCAL_TARGET_NAME}_BUILT_AS_STATIC
)

install (TARGETS ${LOCAL_TARGET_NAME} DESTINATION lib
        EXPORT ${PROJECT_NAME}Targets
        LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
        ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
        RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
        INCLUDES DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}
)

install (FILES ${API_HEADERS} ${CMAKE_CURRENT_BINARY_DIR}/${LOCAL_TARGET_NAME}_Export.h DESTINATION Include)
